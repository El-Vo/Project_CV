<!doctype html>
<html class="vh-100" data-bs-theme="light" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
    />
    <title>Project_CV</title>
    <link
      rel="apple-touch-icon"
      type="image/png"
      sizes="180x180"
      href="assets/img/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="assets/img/favicon-16x16.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="assets/img/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="180x180"
      href="assets/img/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="assets/img/android-chrome-192x192.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="512x512"
      href="assets/img/android-chrome-512x512.png"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body class="d-flex flex-grow-1">
    <main
      class="d-flex flex-grow-1 justify-content-center align-items-end w-100 h-100"
    >
      <div class="video-container">
        <video id="webcam" autoplay playsinline muted></video>
        <canvas id="detection-canvas"></canvas>
      </div>

      <canvas id="capture-canvas" style="display: none"></canvas>

      <div class="fixed-bottom w-100">
        <div class="card w-100" id="enter-scan-name">
          <div class="card-body d-flex flex-column gap-2">
            <h4 class="card-title">Enter the name of the object to scan:</h4>
            <input
              id="object-name-input"
              class="form-control-lg w-100"
              type="text"
              placeholder="Car keys, ID, ..."
            /><button
              id="submit-name-button"
              class="btn btn-secondary btn-lg"
              type="button"
            >
              Submit</button
            ><a
              class="btn btn-outline-secondary btn-lg"
              role="button"
              href="index.html"
              >Back</a
            >
          </div>
        </div>
        <div class="card d-none w-100" id="scan-take-photos">
          <div
            class="card-body d-flex w-100 flex-column justify-content-center gap-2"
          >
            <h4 class="card-title">
              Scanning: <span id="display-object-name">&lt;object&gt;</span>
            </h4>
            <h6 id="scan-instructions" class="text-muted card-subtitle mb-2">
              Point the blue square at the object and press the button
              &quot;Start Object Tracking&quot;.
            </h6>
            <h6
              id="photo-count-container"
              class="text-muted card-subtitle mb-2 d-none"
            >
              Photos taken: <span id="photo-count">0</span>
            </h6>
            <button
              id="start-tracking-button"
              class="btn btn-primary btn-lg"
              type="button"
            >
              Start Object Tracking</button
            ><a
              class="btn btn-outline-secondary btn-lg"
              role="button"
              href="index.html"
              >Back</a
            >
          </div>
        </div>
      </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://docs.opencv.org/4.5.4/opencv.js"></script>
    <script type="module">
      import { ScanningLoop } from "./src/scanningLoop.js";
      window.onload = () => {
        const scanner = new ScanningLoop();

        const loop = () => {
          scanner.loop();
          requestAnimationFrame(loop);
        };
        loop();
      };
    </script>
  </body>
</html>
